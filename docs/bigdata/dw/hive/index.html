<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Hive最佳实践 | Bigdata Technology</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="大数据技术博客">
    <meta name="keywords" content="大数据技术,数据仓库,大数据组件,数据血缘,数据质量,数据服务,数据安全,数据采集,数据存储，数据分析,数据计算,数据展示,数据应用,kubernetes">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.ada71c49.css" as="style"><link rel="preload" href="/assets/js/app.cde63a10.js" as="script"><link rel="preload" href="/assets/js/2.b8efe7b7.js" as="script"><link rel="preload" href="/assets/js/10.ca8ecbbb.js" as="script"><link rel="prefetch" href="/assets/js/11.30d9ec67.js"><link rel="prefetch" href="/assets/js/12.63b3aee9.js"><link rel="prefetch" href="/assets/js/13.d40291ce.js"><link rel="prefetch" href="/assets/js/14.de311523.js"><link rel="prefetch" href="/assets/js/15.61d9c9ec.js"><link rel="prefetch" href="/assets/js/16.6e0cd537.js"><link rel="prefetch" href="/assets/js/17.074743d2.js"><link rel="prefetch" href="/assets/js/18.83881e14.js"><link rel="prefetch" href="/assets/js/19.4832c057.js"><link rel="prefetch" href="/assets/js/3.9ca7f2c4.js"><link rel="prefetch" href="/assets/js/4.d2e5caa7.js"><link rel="prefetch" href="/assets/js/5.92fe8c76.js"><link rel="prefetch" href="/assets/js/6.0662a6ea.js"><link rel="prefetch" href="/assets/js/7.a2537eee.js"><link rel="prefetch" href="/assets/js/8.9e6ba80c.js"><link rel="prefetch" href="/assets/js/9.c7a867cd.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ada71c49.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Bigdata Technology" class="logo"> <span class="site-name can-hide">Bigdata Technology</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据技术" class="dropdown-title"><a href="/bigdata/" class="link-title router-link-active">大数据技术</a> <span class="title" style="display:none;">大数据技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bigdata/dw/theory/" class="nav-link">数据仓库</a></li><li class="dropdown-item"><!----> <a href="/bigdata/dc/hadoop/" class="nav-link">大数据组件</a></li><li class="dropdown-item"><!----> <a href="/bigdata/da/lineage/" class="nav-link">大数据应用</a></li></ul></div></div><div class="nav-item"><a href="/k8s/" class="nav-link">kubernetes</a></div><div class="nav-item"><a href="/linux/" class="nav-link">Linux</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/me.png"> <div class="blogger-info"><h3>Tom Ma</h3> <span>默默无闻的小开发</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据技术" class="dropdown-title"><a href="/bigdata/" class="link-title router-link-active">大数据技术</a> <span class="title" style="display:none;">大数据技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bigdata/dw/theory/" class="nav-link">数据仓库</a></li><li class="dropdown-item"><!----> <a href="/bigdata/dc/hadoop/" class="nav-link">大数据组件</a></li><li class="dropdown-item"><!----> <a href="/bigdata/da/lineage/" class="nav-link">大数据应用</a></li></ul></div></div><div class="nav-item"><a href="/k8s/" class="nav-link">kubernetes</a></div><div class="nav-item"><a href="/linux/" class="nav-link">Linux</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>数据仓库</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bigdata/dw/theory/" class="sidebar-link">数仓理论</a></li><li><a href="/bigdata/dw/hive/" aria-current="page" class="active sidebar-link">Hive最佳实践</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bigdata/dw/model/" class="sidebar-link">数仓建模规范</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>大数据组件</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>大数据应用</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/bigdata/#大数据技术" data-v-06225672>大数据技术</a></li><li data-v-06225672><a href="/bigdata/#数据仓库" data-v-06225672>数据仓库</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/ma0qian0" target="_blank" title="作者" class="beLink" data-v-06225672>tomma</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2024-07-08</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">Hive最佳实践<!----></h1>  <div class="theme-vdoing-content content__default"><h3 id="hive最佳实践"><a href="#hive最佳实践" class="header-anchor">#</a> Hive最佳实践</h3> <h4 id="数据分层-京东"><a href="#数据分层-京东" class="header-anchor">#</a> 数据分层(京东)</h4> <p><img src="/img/%E6%95%B0%E4%BB%93-%E6%95%B0%E6%8D%AE%E5%88%86%E5%B1%82.png" alt="数仓-数据分层"></p> <p>BDM—数据缓存层，同ODS，主要是为了命名统一，存放大表的增量数据，按照自然时间分区，</p> <p>FDM—数据基础层，存放全量数据，大表按照创建时间分区，小表非分区</p> <p>GDM—数据汇总层，数据的预关联、预汇总及预加工；依赖对应用的共性提炼</p> <p>ADM—数据应用层，主要是为了命名统一，面向应用，按需定制，即最终结果表存放的数据库</p> <p>DIM—固定数据层，比如国家代码和国家名、地理位置、中文名、国旗图片等</p> <p>TMP—存放临时数据表</p> <p>做好数据分层，构建数据集市，能合理使用计算资源，避免重复计算</p> <h4 id="数据分层-常规"><a href="#数据分层-常规" class="header-anchor">#</a> 数据分层(常规)</h4> <p>DIM - 固定数据层，比如国家代码和国家名、地理位置、中文名、国旗图片等，还包括客户表，产品表的基础字段</p> <p>ODM - 数据缓存层，主要是为了命名统一，存放大表的增量数据，按照自然时间分区</p> <p>DWD - 数据基础层，存放全量数据，大表按照创建时间分区，小表非分区</p> <p>FACT-- 事实数据层，一般为事实事件触发</p> <p>DWS - 轻度聚合层，像客户历史下单数这样的聚合属性</p> <p>ADS - 数据应用层，主要是为了命名统一，面向应用，按需定制，即最终结果表存放的数据库</p> <h4 id="数据分区"><a href="#数据分区" class="header-anchor">#</a> 数据分区</h4> <p>除常量数据库表外，所有数据表都应该分区，在作业流中，周期性的获取或生成数据，一般按时间分区，每个分区内存放全量或增量数据</p> <p>按全量存放，每个分区都保存全量数据的快照，数据即取即用，但后面每个分区的数据递增；按增量存放，使用数据需要加一层处理，但分区的数据均匀且数据量小，推荐增量存放</p> <h4 id="数据格式"><a href="#数据格式" class="header-anchor">#</a> 数据格式</h4> <h5 id="储存格式"><a href="#储存格式" class="header-anchor">#</a> 储存格式</h5> <table><thead><tr><th style="text-align:left;">存储格式</th> <th style="text-align:left;">存储方式</th> <th style="text-align:left;">特点</th></tr></thead> <tbody><tr><td style="text-align:left;">TextFile</td> <td style="text-align:left;">行存储</td> <td style="text-align:left;">存储空间消耗比较大，并且压缩的text 无法分割和合并 查询的效率最低,可以直接存储，加载数据的速度最高</td></tr> <tr><td style="text-align:left;">SequenceFile</td> <td style="text-align:left;">行存储</td> <td style="text-align:left;">存储空间消耗最大,压缩的文件可以分割和合并 查询效率高，需要通过text文件转化来加载</td></tr> <tr><td style="text-align:left;">RCFile</td> <td style="text-align:left;">数据按行分块 每块按照列存储</td> <td style="text-align:left;">存储空间最小，查询的效率最高 ，需要通过text文件转化来加载，加载的速度最低。压缩快 快速列存取。读记录尽量涉及到的block最少 读取需要的列只需要读取每个row group 的头部定义。 读取全量数据的操作 性能可能比sequencefile没有明显的优势</td></tr> <tr><td style="text-align:left;">ORCFile</td> <td style="text-align:left;">数据按行分块 每块按照列存储</td> <td style="text-align:left;">压缩快,快速列存取 ,效率比rcfile高,是rcfile的改良版本</td></tr> <tr><td style="text-align:left;">Parquet</td> <td style="text-align:left;">列存储</td> <td style="text-align:left;">相对于PRC，Parquet压缩比较低，查询效率较低，不支持update、insert和ACID.但是Parquet支持Impala查询引擎</td></tr></tbody></table> <p>https://blog.csdn.net/u010003835/article/details/81098325</p> <p>压缩和解压缩会增加额外的CPU开销，Hadoop的job通常是I/O密集型而不是CPU密集型的，通过减少载入内存的数据量而提高I/O吞吐量会更加提高网络传输性能。</p> <table><thead><tr><th>压缩格式</th> <th>是否可拆分</th> <th>是否自带</th> <th>压缩率</th> <th>速度</th> <th>是否hadoop自带</th></tr></thead> <tbody><tr><td>gzip</td> <td>否</td> <td>是</td> <td>很高</td> <td>比较快</td> <td>是</td></tr> <tr><td>lzo</td> <td>是</td> <td>是</td> <td>比较高</td> <td>很快</td> <td>否，要安装</td></tr> <tr><td>snappy</td> <td>否</td> <td>是</td> <td>比较高</td> <td>很快</td> <td>否，要安装</td></tr> <tr><td>bzip2</td> <td>是</td> <td>否</td> <td>最高</td> <td>慢</td> <td>是</td></tr></tbody></table> <h5 id="字段格式"><a href="#字段格式" class="header-anchor">#</a> 字段格式</h5> <p>而是要考虑一定的数据清洗，比如异常字段的处理、字段命名规范化、时间字段的统一等，一般这些很容易会被忽略，但是却至关重要</p> <h4 id="hivesql"><a href="#hivesql" class="header-anchor">#</a> HiveSQL</h4> <h5 id="列裁剪和分区裁剪"><a href="#列裁剪和分区裁剪" class="header-anchor">#</a> 列裁剪和分区裁剪</h5> <p>最基本的操作。所谓列裁剪就是在查询时只读取需要的列，分区裁剪就是只读取需要的分区</p> <h5 id="避免全表扫描"><a href="#避免全表扫描" class="header-anchor">#</a> 避免全表扫描</h5> <p>对分区列动态的计算比较会引起全表扫描</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>usernum<span class="token punctuation">)</span>
  <span class="token keyword">from</span> <span class="token punctuation">(</span><span class="token keyword">select</span> usernum
          <span class="token keyword">from</span> tb_test
         <span class="token keyword">where</span> cp <span class="token operator">&lt;=</span> <span class="token number">2020040500</span>
           <span class="token operator">and</span> cp <span class="token operator">&gt;=</span>
               from_unixtime<span class="token punctuation">(</span><span class="token punctuation">(</span>unix_timestamp<span class="token punctuation">(</span><span class="token string">'2020040500'</span><span class="token punctuation">,</span> <span class="token string">'yyyyMMddHH'</span><span class="token punctuation">)</span> <span class="token operator">-</span>
                             <span class="token number">6</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                             <span class="token string">'yyyyMMddHH'</span><span class="token punctuation">)</span>
         <span class="token keyword">group</span> <span class="token keyword">by</span> usernum<span class="token punctuation">)</span> t<span class="token punctuation">;</span>
 <span class="token comment">-- 或者</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>usernum<span class="token punctuation">)</span>
  <span class="token keyword">from</span> <span class="token punctuation">(</span><span class="token keyword">select</span> usernum
          <span class="token keyword">from</span> tb_test
         <span class="token keyword">where</span> cp <span class="token operator">in</span> <span class="token punctuation">(</span>
           <span class="token keyword">select</span> cp <span class="token keyword">from</span> xxx
         <span class="token punctuation">)</span>
       <span class="token punctuation">)</span>
         <span class="token keyword">group</span> <span class="token keyword">by</span> usernum<span class="token punctuation">)</span> t<span class="token punctuation">;</span>
 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>尽量固定分区列范围</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>usernum<span class="token punctuation">)</span>
  <span class="token keyword">from</span> <span class="token punctuation">(</span><span class="token keyword">select</span> usernum
          <span class="token keyword">from</span> tb_test
         <span class="token keyword">where</span> cp <span class="token operator">&lt;=</span> <span class="token number">2020040500</span>
           <span class="token operator">and</span> cp <span class="token operator">&gt;=</span> <span class="token number">2020033000</span>
         <span class="token keyword">group</span> <span class="token keyword">by</span> usernum<span class="token punctuation">)</span> t<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h5 id="谓词下推"><a href="#谓词下推" class="header-anchor">#</a> 谓词下推</h5> <p>将SQL语句中的where谓词逻辑都尽可能提前执行，减少下游处理的数据量。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> a<span class="token punctuation">.</span>uid<span class="token punctuation">,</span>a<span class="token punctuation">.</span>event_type<span class="token punctuation">,</span>b<span class="token punctuation">.</span>topic_id<span class="token punctuation">,</span>b<span class="token punctuation">.</span>title
<span class="token keyword">from</span> calendar_record_log a
<span class="token keyword">left</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> <span class="token punctuation">(</span>
<span class="token keyword">select</span> uid<span class="token punctuation">,</span>topic_id<span class="token punctuation">,</span>title <span class="token keyword">from</span> forum_topic
<span class="token keyword">where</span> pt_date <span class="token operator">=</span> <span class="token number">20190224</span> <span class="token operator">and</span> length<span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">100</span>
<span class="token punctuation">)</span> b <span class="token keyword">on</span> a<span class="token punctuation">.</span>uid <span class="token operator">=</span> b<span class="token punctuation">.</span>uid
<span class="token keyword">where</span> a<span class="token punctuation">.</span>pt_date <span class="token operator">=</span> <span class="token number">20190224</span> <span class="token operator">and</span> <span class="token keyword">status</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>对forum_topic做过滤的where语句写在子查询内部，而不是外部。Hive中有谓词下推优化的配置项<code>hive.optimize.ppd</code>，默认值true，与它对应的逻辑优化器是PredicatePushDown。该优化器就是将OperatorTree中的FilterOperator向上提</p> <p>讲解HiveSQL解析与执行过程:</p> <p>https://tech.meituan.com/2014/02/12/hive-sql-to-mapreduce.html</p> <h5 id="sort-by代替order-by"><a href="#sort-by代替order-by" class="header-anchor">#</a> sort by代替order by</h5> <p>HiveSQL中的order by与其他SQL方言中的功能一样，就是将结果按某字段全局排序，这会导致所有map端数据都进入一个reducer中，在数据量大时可能会长时间计算不完。</p> <p>如果使用sort by，那么还是会视情况启动多个reducer进行排序，并且保证每个reducer内局部有序。为了控制map端数据分配到reducer的key，往往还要配合distribute by一同使用。如果不加distribute by的话，map端数据就会随机分配到reducer。 举个例子，假如要以UID为key，以上传时间倒序、记录类型倒序输出记录数据：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> uid<span class="token punctuation">,</span>upload_time<span class="token punctuation">,</span>event_type<span class="token punctuation">,</span>record_data
<span class="token keyword">from</span> calendar_record_log
<span class="token keyword">where</span> pt_date <span class="token operator">&gt;=</span> <span class="token number">20190201</span> <span class="token operator">and</span> pt_date <span class="token operator">&lt;=</span> <span class="token number">20190224</span>
distribute <span class="token keyword">by</span> uid
sort <span class="token keyword">by</span> upload_time <span class="token keyword">desc</span><span class="token punctuation">,</span>event_type <span class="token keyword">desc</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="group-by代替distinct"><a href="#group-by代替distinct" class="header-anchor">#</a> group by代替distinct</h5> <p>当要统计某一列的去重数时，如果数据量很大，count(distinct)就会非常慢，原因与order by类似，count(distinct)逻辑只会有很少的reducer来处理。这时可以用group by来改写：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">from</span> <span class="token punctuation">(</span>
<span class="token keyword">select</span> uid <span class="token keyword">from</span> calendar_record_log
<span class="token keyword">where</span> pt_date <span class="token operator">&gt;=</span> <span class="token number">20190101</span>
<span class="token keyword">group</span> <span class="token keyword">by</span> uid
<span class="token punctuation">)</span> t<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>但是这样写会启动两个MR job（单纯distinct只会启动一个），所以要确保数据量大到启动job的overhead远小于计算耗时，才考虑这种方法。当数据集很小或者key的倾斜比较明显时，group by还可能会比distinct慢。 那么如何用group by方式同时统计多个列？下面是解决方法：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> t<span class="token punctuation">.</span>a<span class="token punctuation">,</span><span class="token function">sum</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>b<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>c<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>d<span class="token punctuation">)</span> <span class="token keyword">from</span> <span class="token punctuation">(</span>
<span class="token keyword">select</span> a<span class="token punctuation">,</span>b<span class="token punctuation">,</span><span class="token boolean">null</span> c<span class="token punctuation">,</span><span class="token boolean">null</span> d <span class="token keyword">from</span> some_table
<span class="token keyword">union</span> <span class="token keyword">all</span>
<span class="token keyword">select</span> a<span class="token punctuation">,</span><span class="token number">0</span> b<span class="token punctuation">,</span>c<span class="token punctuation">,</span><span class="token boolean">null</span> d <span class="token keyword">from</span> some_table <span class="token keyword">group</span> <span class="token keyword">by</span> a<span class="token punctuation">,</span>c
<span class="token keyword">union</span> <span class="token keyword">all</span>
<span class="token keyword">select</span> a<span class="token punctuation">,</span><span class="token number">0</span> b<span class="token punctuation">,</span><span class="token boolean">null</span> c<span class="token punctuation">,</span>d <span class="token keyword">from</span> some_table <span class="token keyword">group</span> <span class="token keyword">by</span> a<span class="token punctuation">,</span>d
<span class="token punctuation">)</span> t<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h5 id="join将大表放后头-最新版本的hive会优化"><a href="#join将大表放后头-最新版本的hive会优化" class="header-anchor">#</a> Join将大表放后头(最新版本的hive会优化)</h5> <p>Hive假定查询中最后的一个表是大表。它会将其它表缓存起来，然后扫描最后那个表。因此通常需要将小表放前面，或者标记哪张表是大表：/*streamtable(table_name) */</p> <h5 id="使用相同的连接键"><a href="#使用相同的连接键" class="header-anchor">#</a> 使用相同的连接键</h5> <p>当对3个或者更多个表进行join连接时，如果每个on子句都使用相同的连接键的话，那么只会产生一个MapReduce job。</p> <h5 id="尽量原子化操作"><a href="#尽量原子化操作" class="header-anchor">#</a> 尽量原子化操作</h5> <p>尽量避免一个SQL包含复杂逻辑，可以使用中间表来完成复杂的逻辑</p> <h4 id="参数调优"><a href="#参数调优" class="header-anchor">#</a> 参数调优</h4> <h5 id="mapreduce优化"><a href="#mapreduce优化" class="header-anchor">#</a> MapReduce优化</h5> <h5 id="调整mapper数"><a href="#调整mapper数" class="header-anchor">#</a> <strong>调整mapper数</strong></h5> <p>mapper数量与输入文件的split数息息相关，在Hadoop源码<code>org.apache.hadoop.mapreduce.lib.input.FileInputFormat</code>类中可以看到split划分的具体逻辑。这里不贴代码，直接叙述mapper数是如何确定的。</p> <ul><li>可以直接通过参数<code>mapred.map.tasks</code>（默认值2）来设定mapper数的期望值，但它不一定会生效，下面会提到。</li> <li>设输入文件的总大小为<code>total_input_size</code>。HDFS中，一个块的大小由参数<code>dfs.block.size</code>指定，默认值64MB或128MB。在默认情况下，mapper数就是： <code>default_mapper_num = total_input_size / dfs.block.size</code>。</li> <li>参数<code>mapred.min.split.size</code>（默认值1B）和<code>mapred.max.split.size</code>（默认值64MB）分别用来指定split的最小和最大大小。split大小和split数计算规则是： <code>split_size = MAX(mapred.min.split.size, MIN(mapred.max.split.size, dfs.block.size))</code>； <code>split_num = total_input_size / split_size</code>。</li> <li>得出mapper数： <code>mapper_num = MIN(split_num, MAX(default_num, mapred.map.tasks))</code>。</li></ul> <p>可见，如果想减少mapper数，就适当调高<code>mapred.min.split.size</code>，split数就减少了。如果想增大mapper数，除了降低<code>mapred.min.split.size</code>之外，也可以调高<code>mapred.map.tasks</code>。</p> <p>一般来讲，如果输入文件是少量大文件，就减少mapper数；如果输入文件是大量非小文件，就增大mapper数；至于大量小文件的情况，得参考下面“合并小文件”一节的方法处理。</p> <h5 id="调整reducer数"><a href="#调整reducer数" class="header-anchor">#</a> <strong>调整reducer数</strong></h5> <p>reducer数量的确定方法比mapper简单得多。使用参数<code>mapred.reduce.tasks</code>可以直接设定reducer数量，不像mapper一样是期望值。但如果不设这个参数的话，Hive就会自行推测，逻辑如下：</p> <ul><li>参数<code>hive.exec.reducers.bytes.per.reducer</code>用来设定每个reducer能够处理的最大数据量，默认值1G（1.2版本之前）或256M（1.2版本之后）。</li> <li>参数<code>hive.exec.reducers.max</code>用来设定每个job的最大reducer数量，默认值999（1.2版本之前）或1009（1.2版本之后）。</li> <li>得出reducer数： <code>reducer_num = MIN(total_input_size / reducers.bytes.per.reducer, reducers.max)</code>。</li></ul> <p>reducer数量与输出文件的数量相关。如果reducer数太多，会产生大量小文件，对HDFS造成压力。如果reducer数太少，每个reducer要处理很多数据，容易拖慢运行时间或者造成OOM。</p> <h5 id="合并小文件"><a href="#合并小文件" class="header-anchor">#</a> <strong>合并小文件</strong></h5> <ul><li>输入阶段合并 需要更改Hive的输入文件格式，即参数<code>hive.input.format</code>，默认值是<code>org.apache.hadoop.hive.ql.io.HiveInputFormat</code>，我们改成<code>org.apache.hadoop.hive.ql.io.CombineHiveInputFormat</code>。 这样比起上面调整mapper数时，又会多出两个参数，分别是<code>mapred.min.split.size.per.node</code>和<code>mapred.min.split.size.per.rack</code>，含义是单节点和单机架上的最小split大小。如果发现有split大小小于这两个值（默认都是100MB），则会进行合并。具体逻辑可以参看Hive源码中的对应类。</li> <li>输出阶段合并 直接将<code>hive.merge.mapfiles</code>和<code>hive.merge.mapredfiles</code>都设为true即可，前者表示将map-only任务的输出合并，后者表示将map-reduce任务的输出合并。 另外，<code>hive.merge.size.per.task</code>可以指定每个task输出后合并文件大小的期望值，<code>hive.merge.size.smallfiles.avgsize</code>可以指定所有输出文件大小的均值阈值，默认值都是1GB。如果平均大小不足的话，就会另外启动一个任务来进行合并。</li></ul> <h5 id="启用压缩"><a href="#启用压缩" class="header-anchor">#</a> <strong>启用压缩</strong></h5> <p>压缩job的中间结果数据和输出数据，可以用少量CPU时间节省很多空间。压缩方式一般选择Snappy，效率最高。 要启用中间压缩，需要设定<code>hive.exec.compress.intermediate</code>为true，同时指定压缩方式<code>hive.intermediate.compression.codec</code>为<code>org.apache.hadoop.io.compress.SnappyCodec</code>。另外，参数<code>hive.intermediate.compression.type</code>可以选择对块（BLOCK）还是记录（RECORD）压缩，BLOCK的压缩率比较高。 输出压缩的配置基本相同，打开<code>hive.exec.compress.output</code>即可。</p> <h5 id="jvm重用"><a href="#jvm重用" class="header-anchor">#</a> <strong>JVM重用</strong></h5> <p>在MR job中，默认是每执行一个task就启动一个JVM。如果task非常小而碎，那么JVM启动和关闭的耗时就会很长。可以通过调节参数<code>mapred.job.reuse.jvm.num.tasks</code>来重用。例如将这个参数设成5，那么就代表同一个MR job中顺序执行的5个task可以重复使用一个JVM，减少启动和关闭的开销。但它对不同MR job中的task无效。</p> <h5 id="并行执行与本地模式"><a href="#并行执行与本地模式" class="header-anchor">#</a> 并行执行与本地模式</h5> <ul><li>并行执行 Hive中互相没有依赖关系的job间是可以并行执行的，最典型的就是多个子查询union all。在集群资源相对充足的情况下，可以开启并行执行，即将参数<code>hive.exec.parallel</code>设为true。另外<code>hive.exec.parallel.thread.number</code>可以设定并行执行的线程数，默认为8，一般都够用。</li> <li>本地模式 Hive也可以不将任务提交到集群进行运算，而是直接在一台节点上处理。因为消除了提交到集群的overhead，所以比较适合数据量很小，且逻辑不复杂的任务。 设置<code>hive.exec.mode.local.auto</code>为true可以开启本地模式。但任务的输入数据总量必须小于<code>hive.exec.mode.local.auto.inputbytes.max</code>（默认值128MB），且mapper数必须小于<code>hive.exec.mode.local.auto.tasks.max</code>（默认值4），reducer数必须为0或1，才会真正用本地模式执行。</li></ul> <h5 id="严格模式"><a href="#严格模式" class="header-anchor">#</a> 严格模式</h5> <p>所谓严格模式，就是强制不允许用户执行3种有风险的HiveSQL语句，一旦执行会直接失败。这3种语句是：</p> <ul><li>查询分区表时不限定分区列的语句；</li> <li>两表join产生了笛卡尔积的语句；</li> <li>用order by来排序但没有指定limit的语句。</li></ul> <p>要开启严格模式，需要将参数<code>hive.mapred.mode</code>设为strict。</p> <h4 id="探索"><a href="#探索" class="header-anchor">#</a> 探索</h4> <h5 id="full-join"><a href="#full-join" class="header-anchor">#</a> FULL JOIN</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">table</span> test<span class="token punctuation">.</span>a<span class="token punctuation">;</span>
<span class="token keyword">DROP</span> <span class="token keyword">table</span> test<span class="token punctuation">.</span>b<span class="token punctuation">;</span>
<span class="token keyword">DROP</span> <span class="token keyword">table</span> test<span class="token punctuation">.</span>c<span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> test<span class="token punctuation">.</span>a <span class="token punctuation">(</span>
user_id <span class="token keyword">INT</span><span class="token punctuation">,</span>
a string
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> test<span class="token punctuation">.</span>b <span class="token punctuation">(</span>
user_id <span class="token keyword">INT</span><span class="token punctuation">,</span>
b string
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> test<span class="token punctuation">.</span>c <span class="token punctuation">(</span>
user_id <span class="token keyword">INT</span><span class="token punctuation">,</span>
c string
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> test<span class="token punctuation">.</span>a <span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> a<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> test<span class="token punctuation">.</span>a <span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> a<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> test<span class="token punctuation">.</span>a <span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> a<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">'a的null'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> test<span class="token punctuation">.</span>b <span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> test<span class="token punctuation">.</span>b <span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> test<span class="token punctuation">.</span>b <span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'4'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> test<span class="token punctuation">.</span>b <span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">'b的null'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> test<span class="token punctuation">.</span>c <span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> c<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> test<span class="token punctuation">.</span>c <span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> c<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> test<span class="token punctuation">.</span>c <span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> c<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">'c的null'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">WITH</span> user_group <span class="token keyword">AS</span> 
<span class="token punctuation">(</span><span class="token keyword">SELECT</span> user_id <span class="token keyword">FROM</span> 
<span class="token punctuation">(</span><span class="token keyword">SELECT</span> user_id <span class="token keyword">FROM</span> test<span class="token punctuation">.</span>a <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> user_id 
<span class="token keyword">UNION</span> <span class="token keyword">ALL</span> 
<span class="token keyword">SELECT</span> user_id <span class="token keyword">FROM</span> test<span class="token punctuation">.</span>b <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> user_id 
<span class="token keyword">UNION</span> <span class="token keyword">ALL</span> 
<span class="token keyword">SELECT</span> user_id <span class="token keyword">FROM</span> test<span class="token punctuation">.</span>c <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> user_id<span class="token punctuation">)</span> <span class="token keyword">as</span> t <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> t<span class="token punctuation">.</span>user_id<span class="token punctuation">)</span>

<span class="token keyword">SELECT</span> u<span class="token punctuation">.</span>user_id<span class="token punctuation">,</span> a<span class="token punctuation">.</span>a<span class="token punctuation">,</span> b<span class="token punctuation">.</span>b<span class="token punctuation">,</span> c<span class="token punctuation">.</span>c <span class="token keyword">FROM</span> user_group <span class="token keyword">as</span> u 
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> test<span class="token punctuation">.</span>a <span class="token keyword">as</span> a 
<span class="token keyword">ON</span> u<span class="token punctuation">.</span>user_id <span class="token operator">=</span> a<span class="token punctuation">.</span>user_id 
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> test<span class="token punctuation">.</span>b <span class="token keyword">as</span> b 
<span class="token keyword">ON</span> u<span class="token punctuation">.</span>user_id <span class="token operator">=</span> b<span class="token punctuation">.</span>user_id 
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> test<span class="token punctuation">.</span>c <span class="token keyword">as</span> c 
<span class="token keyword">ON</span> u<span class="token punctuation">.</span>user_id <span class="token operator">=</span> c<span class="token punctuation">.</span>user_id 

<span class="token comment">-- 多表FULL JOIN一定要注意，会出现没有join上的情况</span>
<span class="token comment">-- SELECT a.user_id, b.user_id, c.user_id, a.a, b.b, c.c FROM </span>
<span class="token comment">-- (SELECT * FROM test.a where user_id is NOT NULL) as a</span>
<span class="token comment">-- FULL JOIN (SELECT * FROM test.b where user_id is NOT NULL) as b</span>
<span class="token comment">-- ON a.user_id = b.user_id</span>
<span class="token comment">-- FULL JOIN (SELECT * FROM test.c where user_id is NOT NULL) as c</span>
<span class="token comment">-- ON a.user_id = c.user_id and b.user_id = c.user_id</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div></div></div>  <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2024/07/10, 00:48:23</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/bigdata/dw/theory/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">数仓理论</div></a> <a href="/bigdata/dw/model/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">数仓建模规范</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/bigdata/dw/theory/" class="prev">数仓理论</a></span> <span class="next"><a href="/bigdata/dw/model/">数仓建模规范</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/bigdata/dw/theory/"><div>
            数仓理论
            <!----></div></a> <span class="date">07-08</span></dt></dl><dl><dd>02</dd> <dt><a href="/bigdata/dw/model/"><div>
            数仓建模规范
            <!----></div></a> <span class="date">07-08</span></dt></dl><dl><dd>03</dd> <dt><a href="/bigdata/dc/hadoop/"><div>
            Hadoop
            <!----></div></a> <span class="date">07-08</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:tommaqian@gmail.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2024
    <span>Tom Ma | <a href="https://github.com" target="_blank">MIT License</a> | <a href="http://beian.miit.gov.cn/" target="_blank">京ICP备2024034950号</a> | <img src="/img/beian.png" style="width: 15px; margin-bottom: -3px;" /> <a href="https://beian.mps.gov.cn/#/query/webSearch?code=45142202000030" rel="noreferrer" target="_blank">桂公网安备45142202000030</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.cde63a10.js" defer></script><script src="/assets/js/2.b8efe7b7.js" defer></script><script src="/assets/js/10.ca8ecbbb.js" defer></script>
  </body>
</html>
